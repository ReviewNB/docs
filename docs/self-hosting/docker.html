

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; ReviewNB 0.0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Create Database" href="database.html" />
    <link rel="prev" title="Self Hosted ReviewNB" href="index.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ReviewNB
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted/index.html">Hosted ReviewNB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Self Hosted ReviewNB</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-image">Run the image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-installation">Verify Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#domain-name-https-support">Domain Name &amp; HTTPS Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-bot-comments">Verify Bot Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optional-tips">Optional Tips</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Create Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="gh_app.html">Create GitHub App</a></li>
<li class="toctree-l2"><a class="reference internal" href="bot_comments.html">Verify Bot Comments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testimonials.html">Testimonials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ReviewNB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Self Hosted ReviewNB</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/self-hosting/docker.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>ReviewNB application is distributed as a docker image via <a href="https://quay.io/" target="_blank">Quay</a>. Once your on-prem request is approved, we create a private docker image for your use &amp; grant you access to it.</p>
<p>You can use deployment tool of your choice to run the docker image. Below, we show a simple way to run the docker image from command line.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Running docker image from the command line on a single instance works well for small to moderate installations. For larger deployments (&gt;250 concurrent users) we recommend running ReviewNB in a cluster with container scheduling platforms such as Kubernetes, Docker compose, AWS ECS etc.</p>
</div>
<div class="section" id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h2>
<p>ReviewNB can pretty much run on any hardware. The only real requirement is to have at least 8GB of memory. Go higher on memory if your notebooks tend to be larger or you are expecting lot of concurrent users.</p>
</div>
<div class="section" id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Docker should be installed, see the <a href="https://docs.docker.com/install/" target="_blank">official installation docs</a></li>
<li>Credentials to pull your private docker image from Quay. You should’ve received it in registration email. If not, write to us at <cite>support&#64;reviewnb.com</cite></li>
<li><a class="reference internal" href="gh_app.html#create-github-app"><span class="std std-ref">Create GitHub App</span></a></li>
<li><a class="reference internal" href="database.html#create-database"><span class="std std-ref">Create Database</span></a></li>
</ul>
</div>
<div class="section" id="run-the-image">
<h2>Run the image<a class="headerlink" href="#run-the-image" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Login (via docker CLI) to the Quay docker registry with the credentials we sent you via email.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> docker login -u<span class="o">=</span><span class="s2">&quot;&lt;username&gt;&quot;</span> -p<span class="o">=</span><span class="s2">&quot;&lt;password&gt;&quot;</span> quay.io
</pre></div>
</div>
</li>
<li><p class="first">Pull the docker image. Image name &amp; tag would also be available in the registration email we sent you.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> docker pull quay.io/reviewnb/&lt;your-company-name&gt;:&lt;reviewnb-version&gt;
</pre></div>
</div>
</li>
<li><p class="first">Run the docker image. Substitue all <cite>-</cite>-env variables with your own values as explained in the table below this command.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> docker run --detach <span class="se">\</span>
--publish <span class="m">443</span>:8000 --publish <span class="m">80</span>:8000 <span class="se">\</span>
--restart always <span class="se">\</span>
--env <span class="nv">GITHUB_APP_ID</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_CLIENT_ID</span><span class="o">=</span><span class="s2">&quot;Iv1.5a6123881f61e84c&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_CLIENT_SECRET</span><span class="o">=</span><span class="s2">&quot;2c40dbe73d8rdg3b7c37fbbab5d376b174b53deb&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://github.corp.your-company-domain.com&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_APP_URL</span><span class="o">=</span><span class="s2">&quot;https://ghes.nurtch.com/github-apps/reviewnb-for-nurtch&quot;</span> <span class="se">\</span>
--env <span class="nv">REVIEWNB_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://reviewnb.nurtch.com&quot;</span> <span class="se">\</span>
--env <span class="nv">DB_URL</span><span class="o">=</span><span class="s2">&quot;postgres://username:pwd@host:5432/database&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_APP_PEM</span><span class="o">=</span><span class="s2">&quot;-----BEGIN RSA PRIVATE KEY-----\nMI&lt;really-long-pem-key&gt;Z9huMC\n-----END RSA PRIVATE KEY-----\n&quot;</span> <span class="se">\</span>
quay.io/reviewnb/&lt;your-company-name&gt;:&lt;reviewnb-version&gt;
</pre></div>
</div>
</li>
</ul>
<p>This will download the image, start a container and publish ports needed to access the application. The container will automatically restart after a system reboot.</p>
<p>Source for environment variables,</p>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><cite>-</cite>-env variables</th>
<th class="head">Source</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">GITHUB_BASE_URL</span></code></td>
<td><div class="first last line-block">
<div class="line">Endpoint at which your company’s GitHub enterprise instance is running</div>
<div class="line"><br /></div>
<div class="line">If you are using ReviewNB with github.com then use <code class="docutils literal"><span class="pre">https://github.com</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">REVIEWNB_BASE_URL</span></code></td>
<td>Endpoint at which your self hosted ReviewNB will be running</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">DB_URL</span></code></td>
<td><a class="reference internal" href="database.html#create-database"><span class="std std-ref">Create Database</span></a></td>
</tr>
<tr class="row-odd"><td><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">GITHUB_APP_ID</span></code></li>
<li><code class="docutils literal"><span class="pre">GITHUB_APP_URL</span></code></li>
<li><code class="docutils literal"><span class="pre">GITHUB_CLIENT_ID</span></code></li>
<li><code class="docutils literal"><span class="pre">GITHUB_APP_PEM</span></code></li>
<li><code class="docutils literal"><span class="pre">GITHUB_CLIENT_SECRET</span></code></li>
</ul>
</td>
<td><a class="reference internal" href="gh_app.html#create-github-app"><span class="std std-ref">Create GitHub App</span></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Permalink to this headline">¶</a></h2>
<p>Visit the endpoint where container is running (endpoint could even be an ip address for the sake of verification). You should see the login page without any errors on it.
Do not login just yet, you can login after adding HTTPS suppport (last step below).</p>
<img alt="../_images/login_page_2.png" class="align-center" src="../_images/login_page_2.png" />
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>If login page doesn’t show up or the page indicates any preflight errors, most likely you haven’t set all the environment variables properly.</li>
<li>If all environment variables are set correctly and you’re still seeing errors, look at container logs (<code class="docutils literal"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">&lt;container-id&gt;</span></code>) to see if logs are complaining about something.</li>
<li>If still not resolved, reach out to <cite>support&#64;reviewnb.com</cite></li>
</ul>
</div>
</div>
<div class="section" id="domain-name-https-support">
<h2>Domain Name &amp; HTTPS Support<a class="headerlink" href="#domain-name-https-support" title="Permalink to this headline">¶</a></h2>
<p>At this point, the application is simply running on port 80 and 443 on an instance. You should,</p>
<ul class="simple">
<li>Add a load balancer with HTTPS support in front of the instance. The exact steps depends on the infrastructure you are using. E.g. Create ALB for container running on AWS EC2</li>
<li>Add a CNAME entry that points <code class="docutils literal"><span class="pre">REVIEWNB_BASE_URL</span></code> to your load balancer. That way the application is accessible on easy to remeber emdpoint (e.g. <em>reviewnb.xyz-company.com</em>)</li>
</ul>
<p>Once the HTTPS support is added, you can set an additional environment variable <code class="docutils literal"><span class="pre">SSL_REDIRECT=1</span></code> to redirect all HTTP traffic to be served via secure HTTPS protocol.</p>
</div>
<div class="section" id="verify-bot-comments">
<h2>Verify Bot Comments<a class="headerlink" href="#verify-bot-comments" title="Permalink to this headline">¶</a></h2>
<p>You must perform this verification step to make sure all features are working as expected,</p>
<ul class="simple">
<li><a class="reference internal" href="bot_comments.html#bot-comments"><span class="std std-ref">Verify Bot Comments</span></a></li>
</ul>
<p>That’s all! You have succesfully installed and verified ReviewNB application &amp; it’s ready for use.</p>
</div>
<div class="section" id="optional-tips">
<h2>Optional Tips<a class="headerlink" href="#optional-tips" title="Permalink to this headline">¶</a></h2>
<p>Just some useful tips as you progress towards being a super user,</p>
<ul class="simple">
<li>All repository, commit, and PR URLs on ReviewNB intentionally have the same URL structure as that of GitHub. So you can use <a href="https://medium.com/@amitrathi/dynamic-bookmarks-for-reviewnb-52a7db356d4" target="_blank">dynamic bookmarks</a> to quickly jump back &amp; forth between ReviewNB &amp; GitHub.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="database.html" class="btn btn-neutral float-right" title="Create Database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Self Hosted ReviewNB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, ReviewNB.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>