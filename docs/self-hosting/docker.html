

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; ReviewNB 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Create Database" href="database.html" />
    <link rel="prev" title="Self Hosted ReviewNB" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> ReviewNB
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosted/index.html">Hosted ReviewNB</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Self Hosted ReviewNB</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hardware">Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="#prerequisite">Prerequisite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-the-image">Run the image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-installation">Verify Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#domain-name-https-support">Domain Name &amp; HTTPS Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-test-email">Verify Test Email</a></li>
<li class="toctree-l3"><a class="reference internal" href="#verify-bot-comments">Verify Bot Comments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#optional-tips">Optional Tips</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="database.html">Create Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="gh_app.html">Create GitHub App</a></li>
<li class="toctree-l2"><a class="reference internal" href="bot_comments.html">Verify Bot Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="update.html">Update On-Prem ReviewNB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testimonials.html">Testimonials</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ReviewNB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Self Hosted ReviewNB</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/self-hosting/docker.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>ReviewNB application is distributed as a docker image via <a href="https://quay.io/" target="_blank">Quay</a>. Once your on-prem request is approved, we create a private docker image for your use &amp; grant you access to it.</p>
<p>You can use deployment tool of your choice to run the docker image. Below, we show a simple way to run the docker image from command line.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Running docker image from the command line on a single instance works well for small to moderate installations. For larger deployments (&gt;250 <strong>concurrent</strong> users) we recommend running ReviewNB in a cluster with container scheduling platforms such as Kubernetes, Docker compose, AWS ECS etc.</p>
</div>
<div class="section" id="hardware">
<h2>Hardware<a class="headerlink" href="#hardware" title="Permalink to this headline">¶</a></h2>
<p>ReviewNB can pretty much run on any hardware. The only real requirement is to have at least 8GB of memory. Go higher on memory if your notebooks tend to be larger or you are expecting lot of concurrent users.</p>
</div>
<div class="section" id="prerequisite">
<h2>Prerequisite<a class="headerlink" href="#prerequisite" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Docker should be installed, see the <a href="https://docs.docker.com/install/" target="_blank">official installation docs</a></p></li>
<li><p>Credentials to pull your private docker image from Quay. You should’ve received it in registration email. If not, write to us at <cite>support&#64;reviewnb.com</cite></p></li>
<li><p><a class="reference internal" href="gh_app.html#create-github-app"><span class="std std-ref">Create GitHub App</span></a></p></li>
<li><p><a class="reference internal" href="database.html#create-database"><span class="std std-ref">Create Database</span></a></p></li>
<li><p>Following SMTP server credentials are required. This is to notify users when there is a new comment on their notebooks or somebody replies to a conversation. You can use the same SMTP settings that you are using with GitHub Enterprise or any other SMTP server you might have.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>EMAIL_HOST</em>: URL of SMTP server</p></li>
<li><p><em>EMAIL_PORT</em>: Port number of SMTP server (defaults to port 587 if none specified)</p></li>
<li><p><em>EMAIL_HOST_USER</em>: Username to authenticate with SMTP server</p></li>
<li><p><em>EMAIL_HOST_PASSWORD</em>: Password to authenticate with SMTP server</p></li>
<li><p><em>SENDER_EMAIL_ADDRESS</em>: Email address of the sender e.g. <em>no-reply&#64;&lt;your-domain&gt;.com</em></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="run-the-image">
<h2>Run the image<a class="headerlink" href="#run-the-image" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Login (via docker CLI) to Quay docker registry with the credentials we sent you via email.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> docker login -u<span class="o">=</span><span class="s2">&quot;&lt;username&gt;&quot;</span> -p<span class="o">=</span><span class="s2">&quot;&lt;password&gt;&quot;</span> quay.io
</pre></div>
</div>
</li>
<li><p>Pull the docker image. Image name &amp; tag would also be available in the registration email we sent you.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> docker pull quay.io/reviewnb/&lt;your-company-name&gt;:&lt;reviewnb-version&gt;
</pre></div>
</div>
</li>
</ul>
<ul id="run-docker-image">
<li><p>Run the docker image. Substitue all <cite>-</cite>-env variables with your own values as explained in the table below this command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> docker run --detach <span class="se">\</span>
--publish <span class="m">443</span>:8000 --publish <span class="m">80</span>:8000 <span class="se">\</span>
--restart always <span class="se">\</span>
--env <span class="nv">GITHUB_APP_ID</span><span class="o">=</span><span class="s2">&quot;1&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_CLIENT_ID</span><span class="o">=</span><span class="s2">&quot;Iv1.5a6123881f61e84c&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_CLIENT_SECRET</span><span class="o">=</span><span class="s2">&quot;2c40dbe73d8rdg3b7c37fbbab5d376b174b53deb&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://github.corp.your-company-domain.com&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_APP_URL</span><span class="o">=</span><span class="s2">&quot;https://ghes.nurtch.com/github-apps/reviewnb-for-nurtch&quot;</span> <span class="se">\</span>
--env <span class="nv">REVIEWNB_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://reviewnb.nurtch.com&quot;</span> <span class="se">\</span>
--env <span class="nv">DB_URL</span><span class="o">=</span><span class="s2">&quot;postgres://username:pwd@host:5432/database&quot;</span> <span class="se">\</span>
--env <span class="nv">EMAIL_HOST</span><span class="o">=</span><span class="s2">&quot;&lt;your-smtp-server-url&gt;&quot;</span> <span class="se">\</span>
--env <span class="nv">EMAIL_PORT</span><span class="o">=</span><span class="s2">&quot;&lt;your-smtp-server-port&gt;&quot;</span> <span class="se">\</span>
--env <span class="nv">EMAIL_HOST_USER</span><span class="o">=</span><span class="s2">&quot;&lt;your-smtp-server-username&gt;&quot;</span> <span class="se">\</span>
--env <span class="nv">EMAIL_HOST_PASSWORD</span><span class="o">=</span><span class="s2">&quot;&lt;your-smtp-server-password&gt;&quot;</span> <span class="se">\</span>
--env <span class="nv">SENDER_EMAIL_ADDRESS</span><span class="o">=</span><span class="s2">&quot;no-reply@&lt;your-domain&gt;.com&quot;</span> <span class="se">\</span>
--env <span class="nv">TEST_EMAIL_ADDRESS</span><span class="o">=</span><span class="s2">&quot;&lt;email-address-on-which-test-email-will-be-sent&gt;&quot;</span> <span class="se">\</span>
--env <span class="nv">GITHUB_APP_PEM</span><span class="o">=</span><span class="s2">&quot;-----BEGIN RSA PRIVATE KEY-----\nMI&lt;really-long-pem-key&gt;Z9huMC\n-----END RSA PRIVATE KEY-----\n&quot;</span> <span class="se">\</span>
quay.io/reviewnb/&lt;your-company-name&gt;:&lt;reviewnb-version&gt;
</pre></div>
</div>
</li>
</ul>
<p>This will download the image, start a container and publish ports needed to access the application. The container will automatically restart after a system reboot.</p>
<p>Source for environment variables,</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><cite>-</cite>-env variables</p></th>
<th class="head"><p>Source</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">GITHUB_BASE_URL</span></code></p></td>
<td><div class="line-block">
<div class="line">Endpoint at which your company’s GitHub enterprise instance is running</div>
<div class="line"><br /></div>
<div class="line">If you are using ReviewNB with github.com then use <code class="docutils literal notranslate"><span class="pre">https://github.com</span></code></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REVIEWNB_BASE_URL</span></code></p></td>
<td><p>Endpoint at which your self hosted ReviewNB will be running</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DB_URL</span></code></p></td>
<td><p><a class="reference internal" href="database.html#create-database"><span class="std std-ref">Create Database</span></a></p></td>
</tr>
<tr class="row-odd"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_APP_ID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_APP_URL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_CLIENT_ID</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_APP_PEM</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GITHUB_CLIENT_SECRET</span></code></p></li>
</ul>
</td>
<td><p><a class="reference internal" href="gh_app.html#create-github-app"><span class="std std-ref">Create GitHub App</span></a></p></td>
</tr>
<tr class="row-even"><td><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">EMAIL_HOST</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EMAIL_PORT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EMAIL_HOST_USER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EMAIL_HOST_PASSWORD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SENDER_EMAIL_ADDRESS</span></code></p></li>
</ul>
</td>
<td><div class="line-block">
<div class="line">These are SMTP server settings required to send emails when a new comment</div>
<div class="line">is posted on a notebook. You can use any SMTP server.</div>
<div class="line"><br /></div>
<div class="line"><cite>SENDER_EMAIL_ADDRESS</cite> is used as a <cite>from</cite> field for each email.</div>
<div class="line">Make sure the sender email is acceptable to your SMTP server.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">TEST_EMAIL_ADDRESS</span></code></p></td>
<td><p>Use your own email address. A test email will be sent on this address.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EMAIL_USE_TLS</span></code> (optional)</p></td>
<td><p>Set this to “0” if your SMTP server does not support TLS protocol.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Permalink to this headline">¶</a></h2>
<p>Visit the endpoint where container is running (endpoint could even be an ip address for the sake of verification). You should see the login page without any errors on it.
Do not login just yet, you can login after adding HTTPS suppport (last step below).</p>
<img alt="../_images/login_page_2.png" class="align-center" src="../_images/login_page_2.png" />
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>If login page doesn’t show up or the page indicates any preflight errors, most likely you haven’t set all the environment variables properly.</p></li>
<li><p>If all environment variables are set correctly and you’re still seeing errors, look at container logs (<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">&lt;container-id&gt;</span></code>) to see if logs are complaining about something.</p></li>
<li><p>If still not resolved, reach out to <cite>support&#64;reviewnb.com</cite></p></li>
</ul>
</div>
</div>
<div class="section" id="domain-name-https-support">
<h2>Domain Name &amp; HTTPS Support<a class="headerlink" href="#domain-name-https-support" title="Permalink to this headline">¶</a></h2>
<p>At this point, the application is simply running on port 80 and 443 on an instance. You should,</p>
<ul class="simple">
<li><p>Add a load balancer with HTTPS support in front of the instance. The exact steps depends on the infrastructure you are using. E.g. Create ALB for container running on AWS EC2</p></li>
<li><p>Add a CNAME entry that points <code class="docutils literal notranslate"><span class="pre">REVIEWNB_BASE_URL</span></code> to your load balancer. That way the application is accessible on easy to remeber endpoint (e.g. <em>reviewnb.xyz-company.com</em>)</p></li>
</ul>
<p>Once the HTTPS support is added, you can set an additional environment variable <code class="docutils literal notranslate"><span class="pre">SSL_REDIRECT=1</span></code> to redirect all HTTP traffic to be served via secure HTTPS protocol.</p>
</div>
<div class="section" id="verify-test-email">
<h2>Verify Test Email<a class="headerlink" href="#verify-test-email" title="Permalink to this headline">¶</a></h2>
<p>Once you see the login page without any errors, you should visit <code class="docutils literal notranslate"><span class="pre">/send_test_email</span></code> as shown below.</p>
<img alt="../_images/send_test_email.png" class="align-center" src="../_images/send_test_email.png" />
<p>You must receive a test email on <code class="docutils literal notranslate"><span class="pre">TEST_EMAIL_ADDRESS</span></code> you specified.</p>
<img alt="../_images/test_email.png" class="align-center" src="../_images/test_email.png" />
<p>If you don’t receive test email,</p>
<ul class="simple">
<li><p>Check container logs (<code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">&lt;container-id&gt;</span></code>) to see if there are any errors</p></li>
<li><p>Check your SMTP server logs to see if email failed to send for some reason</p></li>
<li><p>If still not resolved, reach out to <cite>support&#64;reviewnb.com</cite></p></li>
</ul>
</div>
<div class="section" id="verify-bot-comments">
<h2>Verify Bot Comments<a class="headerlink" href="#verify-bot-comments" title="Permalink to this headline">¶</a></h2>
<p>You must perform this verification step to make sure all features are working as expected,</p>
<ul class="simple">
<li><p><a class="reference internal" href="bot_comments.html#bot-comments"><span class="std std-ref">Verify Bot Comments</span></a></p></li>
</ul>
<hr class="docutils" />
<p>That’s all! You have succesfully installed and verified ReviewNB application &amp; it’s ready for use. 🥳</p>
<div class="section" id="optional-tips">
<h3>Optional Tips<a class="headerlink" href="#optional-tips" title="Permalink to this headline">¶</a></h3>
<p>Some handy tips for ReviewNB users,</p>
<ul class="simple">
<li><p>All notebook, repository, commit, and PR URLs on ReviewNB intentionally have the same URL structure as that of GitHub. So you can use <a href="https://medium.com/@amitrathi/dynamic-bookmarks-for-reviewnb-52a7db356d4" target="_blank">dynamic bookmarks</a> to quickly jump back &amp; forth between ReviewNB &amp; GitHub.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="database.html" class="btn btn-neutral float-right" title="Create Database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Self Hosted ReviewNB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, ReviewNB

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>